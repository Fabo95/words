{"version":3,"file":"ruleNoVolatileImport.test.js","sourceRoot":"","sources":["../../../src/rules/noVolatileImport/ruleNoVolatileImport.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { TSESLint } from \"@typescript-eslint/experimental-utils\";\n\nimport { RuleNoVolatileImport } from \"@styleguide/rules/noVolatileImport/ruleNoVolatileImport\";\nimport { NoVolatileImportOptions } from \"@styleguide/rules/noVolatileImport/utils/noVolatileImportTypes\";\n\nconst ruleTester = new TSESLint.RuleTester({\n  env: {\n    browser: true,\n    es2021: true,\n  },\n  parser: require.resolve(\"@typescript-eslint/parser\"),\n  parserOptions: {\n    ecmaFeatures: {\n      jsx: true,\n    },\n    ecmaVersion: 12,\n    sourceType: \"module\",\n  },\n});\n\nconst validStatements: TSESLint.ValidTestCase<NoVolatileImportOptions[]>[] = [\n  {\n    code: `import { allowedItem } from \"node_modules/item\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"utils\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"folderA/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"utils\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"folderA/helpers/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"utils\", \"helpers\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"folderA/helpers/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"helpers\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"utils\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"helpers/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"helpers\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [\n      {\n        importFolders: [\"utils\"],\n        excludedImportPaths: [\"^folderB\\\\/utils\\\\/constants$\"],\n      },\n    ],\n  },\n  {\n    code: `import { allowedItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [{ importFolders: [\"utils\"], excludedFilePaths: [\".*folderA\"] }],\n  },\n  {\n    code: `import { allowedItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    options: [\n      {\n        importFolders: [\"utils\"],\n        includedImportPaths: [\"^folderA\\\\/utils\\\\/constants$\"],\n      },\n    ],\n  },\n  {\n    code: `import { allowedItem } from \"folderA/utils/constants\";`,\n    filename: \"/folderB/file.ts\",\n    options: [{ importFolders: [\"utils\"], includedFilePaths: [\".*folderA\"] }],\n  },\n];\n\nconst invalidStatements: TSESLint.InvalidTestCase<\n  \"defaultMessage\",\n  NoVolatileImportOptions[]\n>[] = [\n  {\n    code: `import { volatileItem } from \"folderA/utils/constants\";`,\n    filename: \"/folderB/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [{ importFolders: [\"utils\"] }],\n  },\n  {\n    code: `import { volatileItem } from \"folderA/helpers/constants\";`,\n    filename: \"/folderB/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [{ importFolders: [\"utils\", \"helpers\"] }],\n  },\n  {\n    code: `import { volatileItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [\n      {\n        importFolders: [\"utils\"],\n        excludedImportPaths: [\"^folderA\\\\/utils\\\\/constants$\"],\n      },\n    ],\n  },\n  {\n    code: `import { volatileItem } from \"folderA/utils/constants\";`,\n    filename: \"/folderB/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [{ importFolders: [\"utils\"], excludedFilePaths: [\".*folderA\"] }],\n  },\n  {\n    code: `import { volatileItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [\n      {\n        importFolders: [\"utils\"],\n        includedImportPaths: [\"^folderB\\\\/utils\\\\/constants$\"],\n      },\n    ],\n  },\n  {\n    code: `import { volatileItem } from \"folderB/utils/constants\";`,\n    filename: \"/folderA/file.ts\",\n    errors: [{ messageId: \"defaultMessage\" }],\n    options: [{ importFolders: [\"utils\"], includedFilePaths: [\".*folderA\"] }],\n  },\n];\n\nruleTester.run(\"no-volatile-import\", RuleNoVolatileImport, {\n  valid: validStatements,\n  invalid: invalidStatements,\n});\n"]}